var documenterSearchIndex = {"docs":
[{"location":"","page":"Home","title":"Home","text":"CurrentModule = OteraEngine","category":"page"},{"location":"#OteraEngine.jl","page":"Home","title":"OteraEngine.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documentation for OteraEngine.jl.","category":"page"},{"location":"","page":"Home","title":"Home","text":"This package is very very small, but useful. When you use this package with Genie.jl, you can create dynamic and powerful pages.","category":"page"},{"location":"","page":"Home","title":"Home","text":"If you have any questions about this, please write issues on GitHub!","category":"page"},{"location":"#Resources","page":"Home","title":"Resources","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documents(This Page)\nTutorial\nsource","category":"page"},{"location":"tutorial/#Tutorial","page":"Tutorial","title":"Tutorial","text":"","category":"section"},{"location":"tutorial/#Installation","page":"Tutorial","title":"Installation","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"OteraEngine can be installed using the Julia package manager. From the Julia REPL, type ] to enter the Pkg REPL mode and run.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"pkg > add OteraEngine","category":"page"},{"location":"tutorial/#API","page":"Tutorial","title":"API","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Acutually, this package has only one structure, but these are very powerful because of Metaprogramming function of Julia.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Template\n@filter","category":"page"},{"location":"tutorial/#Main.OteraEngine.Template","page":"Tutorial","title":"Main.OteraEngine.Template","text":"Template(\n    txt::String;\n    path::Bool=true,\n    filters::Dict{String, Symbol},\n    config_path::String=\"\",\n    config::Dict{String, String} = Dict()\n)\n\nThis is the only structure and function of this package. This structure has 4 parameter,\n\ntxt is the path to the template file or template of String type.\npath determines whether the parameter txt represents the file path. The default value is true.\nfilters is used to register non-builtin filters. Please see filters for more details.\nconfig_path is path to config file. The suffix of config file must be toml.\nconfig is configuration of template. It is type of Dict, please see configuraiton for more detail.\n\nRendering\n\nAfter you create a Template, you just have to execute the codes! For this, you use the Function-like Object of Template structure.tmp(; init::Dict{String, T}) where {T} variables are initialized by init Dict which contains the pair of name(String) and value. If you don't pass the init, the initialization won't be done.\n\nExample\n\nThis is a simple usage:\n\njulia> using OteraEngine\njulia> txt = \"Hello {{ usr }}!\"\njulia> tmp = Template(txt, path = false)\njulia> init = Dict(\"usr\"=>\"OteraEngine\")\njulia> tmp(init = init)\n\n\n\n\n\n","category":"type"},{"location":"tutorial/#Main.OteraEngine.@filter","page":"Tutorial","title":"Main.OteraEngine.@filter","text":"@filter func\n\nThis macro registers func into OteraEngine, then you can use it as a filter(of course you have to pass it to filters argument of Template function). The form of func should be normal or one-line definition but not lambda.\n\nExample\n\njulia> @filter function greet(x)\n            return x * \"Hello\"\n        end\njulia> @filter say_twice(x) = x*x\n\n\n\n\n\n","category":"macro"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"info: WARNING caused by `template_render`\nRedefining template_render may generate a warning, but there is currently no problem.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Learn about syntax and configuration in the sections below.","category":"page"},{"location":"tutorial/#Abstract-for-Usage","page":"Tutorial","title":"Abstract for Usage","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Basic syntax of OteraEngine is very similar to one of Jinja2 of Python. You can use OteraEngine for any extension format which has text. There are 4 types of blocks:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% ... %}: Control block\n{{ ... }}: Expression block\n{< ... >}: Julia block\n{# ... #}: Comment block","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Control block is used for control flow like if or for, and Expression block is used for embedding variables. Commend block is just ignored and remove from template. These block must be familiar with those who have ever used jinja2, but OteraEngine has one more block. Julia block makes you possible to write Julia code directly into templates.","category":"page"},{"location":"tutorial/#Variables","page":"Tutorial","title":"Variables","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"As mentioned in previous section, you can embed variables with Expression block. And you can define variables in both templates and julia. Here is an example:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    {% let name = \"Julia\" %}\n        Hello {{name}}\n    {% end %}\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"You can define variables from julia code like this:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"tmp = Template(...)\ntmp(init=Dict(\"name\"=>\"Julia\"))","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"init is also used for control blocks, and its type is Dict. The format is (variable name)=>(value).","category":"page"},{"location":"tutorial/#Filters","page":"Tutorial","title":"Filters","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"This is very useful function for expression block. You can apply filters for variables like this:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{{ value |> escape }}","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"variable name and filter name are separeted by |>. Built-in filters are followings:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"escape or e: escape variables with Markdown.htmlesc\nupper: convert variables into uppercase\nlower: convert variables into lowercase\nsafe: protect literal html fragments (from autoescape)","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"You can define filters by yourself:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"@filter say_twice(txt) = txt*txt\nfilters = Dict(\n    \"repeat\" => say_twice\n)\ntmp = Template(..., filters=filters)","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Then you can use repeat in you template.","category":"page"},{"location":"tutorial/#Julia-Code-Block","page":"Tutorial","title":"Julia Code Block","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"You can write Julia deirectly in templates with this block. Variables are shared between Julia Code Block and Tmp Code Block, and variables defined in init are also available. And arbitary type(for example DataFrame) are available in this block. This is the example:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    {<\n        a = 10\n        b = sqrt(2)\n        round(a*B)\n    >}\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Output:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    14.0\n</div>","category":"page"},{"location":"tutorial/#Comment","page":"Tutorial","title":"Comment","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"To comment out part of template, use comment block which set to {# #} by default:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{#\n    This is comment.\n    These lines are just ignored and removed\n#}","category":"page"},{"location":"tutorial/#White-Space-Control","page":"Tutorial","title":"White Space Control","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"OteraEngine has option to control spaces which is named lstrip_blocks and trim_blocks. If lstrip_blocks is enabled, spaces from start of line behind the block is removed. Template:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% for i in 1:3 %}\n    Hello {{ i }}\n{% end %}","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Without lstrip blocks:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n\n        Hello 1\n\n        Hello 2\n\n        Hello 3\n\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"With lstrip_blocks(you can't see the difference. please try selecting the text):","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n\n        Hello 1\n\n        Hello 2\n\n        Hello 3\n\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"If trim_blocks is enabled, the (only) first newline after the block is removed. Without trim_blocks(lstrip_blocks is disabled):","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n            Hello 1\n            Hello 2\n            Hello 3\n    </div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"With trim_blocks and lstrip_blocks:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n        Hello 1\n        Hello 2\n        Hello 3\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"But, sometimes these options aren't perfect(like macro), and it's annoying to set these options all the time. So, you can use autospace option which automatically enables these options and remove extra spaces from macro.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"And other way to control white spaces is to add + and - to the both ends of blocks. This works partially even if space control options are enabled. + means that the block does nothing about space. And - means that the block removes all the spaces. This is useful when you want to put items in a row with for block:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    {% for i in 1 : 10 -%}\n    {{i}}\n    {%- end %}\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Output:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    12345678910\n</div>","category":"page"},{"location":"tutorial/#Escaping","page":"Tutorial","title":"Escaping","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"It is important to apply HTML escaping in order to prevent XSS. So, autoescape is set to true by default. If you want to escape manually, you can disable this option, and use e or escape filter into expression blocks:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    {{ value |> e }}\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Where value is <script>This is injection attack</script>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    &lt;script&gt;This is injection attack&lt;/script&gt;\n</div>","category":"page"},{"location":"tutorial/#Raw-Text","page":"Tutorial","title":"Raw Text","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Sometimes it is neccessary to ignore blocks and recognize it raw text. Then, you should use raw block:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% raw %}\nThis is test for raw block\n{% you can write anything inside raw block %}\n{% endraw %}","category":"page"},{"location":"tutorial/#Template-Inheritance","page":"Tutorial","title":"Template Inheritance","text":"","category":"section"},{"location":"tutorial/#Include","page":"Tutorial","title":"Include","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"You can include template with {% include \"(template filename)\" %} code block. This is the tiny example:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"#=This is the included template(test2.html)=#\nHello everyone! My name is watasu.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"#=This is the main template=#\n{% include \"test2.html\" %}\nToday, I'd like to introduce OteraEngine.jl","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"warning: Template filename have to be enclosed with double quotation mark\nTemplate filename have to be like this: \"test.html\". Otherwise, parser returns error.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"This code block is also available inside the {% block %} explained in next section.","category":"page"},{"location":"tutorial/#Extends","page":"Tutorial","title":"Extends","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"When you build large web app with OteraEngine, you may want to use \"template of template\". This is possible with {% extends %} code block. This code block have to be located at the top of the document, otherwise ignored. This is the example:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"#=This is the base template(test2.html)=#\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>test for extends</title>\n    </head>\n    <body>\n        <div>\n            {% block body %}\n            {% endblock %}\n        </div>\n    </body>\n</html>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"#=This is the main template=#\n{% extends \"test2.html\" %}\n{% block body %}\n            <h1>hello</h1>\n            <div>\n                <p>some content here.</p>\n            </div>\n{% endblock %}","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"#=Output=#\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>test for extends</title>\n    </head>\n    <body>\n        <div>\n            <h1>hello</h1>\n            <div>\n                <p>some content here.</p>\n            </div>\n        </div>\n    </body>\n</html>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"warning: Template filename have to be enclosed with double quotation mark\nTemplate filename have to be like this: \"test.html\". Otherwise, parser returns error.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"If you write {% extends (template filename) %} in main template, parser will use (template filename) as the base template. And, you can write blocks in the main template with {% block (block name) %} and {% endblock %}.","category":"page"},{"location":"tutorial/#Block-Inheritance","page":"Tutorial","title":"Block Inheritance","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Blocks defined in parent(even in ancestors) is inherited with super():","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"# Grand Parent Template(\"grand.html\")\n<div>\n    {% block body %}\n    Hello Grand Parents\n    {%- endblock %}\n</div>\n# Parent Template(\"parent.html\")\n{% extends \"grand.html\" %}\n{% block body %}\nHello Parent\n{% endblock %}\n# Child Template\n{% extends \"parent.html\" %}\n{% block body %}\n    Hello Child\n    {{ super() }}{{ super.super() }}\n{% endblock %}","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"The, we get this:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"<div>\n    Hello Child\n    Hello Parent\n    Hello Grand Parents\n</div>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"When you want to inherite ancestor's block, you just need to add super. before super().","category":"page"},{"location":"tutorial/#Control-Flow","page":"Tutorial","title":"Control Flow","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"There are 4 blocks available for control flow. if, for, let and set. These blocks are converted into the Julia code directly, and the syntax is completely same with Julia.","category":"page"},{"location":"tutorial/#If","page":"Tutorial","title":"If","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"if block adds the text when condition is true:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% if (condition1) %}\n    This is `if` block\n{% elseif (condition2) %}\n    This is `elseif` block\n{% else %}\n    This is `else` block\n{% end %}","category":"page"},{"location":"tutorial/#For","page":"Tutorial","title":"For","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"for block repeats the text for specified times:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% for i in 1:5 %}\n    Hello {{ i }}\n{% end %}","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"you can use variables defined inside of for block.","category":"page"},{"location":"tutorial/#Let","page":"Tutorial","title":"Let","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"let block creates local variables which has the scope inside of this block:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% let name = \"Julia\" %}\n    Hello {{ name }}\n{% end %}","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"This is equal to with block in Jinja2.","category":"page"},{"location":"tutorial/#Set","page":"Tutorial","title":"Set","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"set block is converted into global (variable) = (value). So you can use variables in every control blocks(not in expression blocks now).","category":"page"},{"location":"tutorial/#Macro","page":"Tutorial","title":"Macro","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Macro is similar to function in Programming Language. In fact, OteraEngine converts macros into Julia function internally. This is the example:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% macro input(name, value=\"\", type=\"text\", size=20) %}\n    <input type=\"{{ type }}\" name=\"{{ name }}\" value=\"{{\n        value|>e }}\" size=\"{{ size }}\">\n{% endmacro %}\n\n<html>\n    <head><title>MyPage</title></head>\n    <body>\n        {{ input(\"test\") }}\n    </body>\n</html>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"You should note that macro emits extra white space when you don't use any white space control options. So, it is strongly recommended to use autospace when you use macros.","category":"page"},{"location":"tutorial/#Import-Macros","page":"Tutorial","title":"Import Macros","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"Sometimes you need the macro defined the different template. In such case, you should use import and from. import adds an external template into the namespace with alias like this:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% import \"import2.html\" as base %}\n\n<html>\n    <head><title>MyPage</title></head>\n    <body>\n        {{ base.input(\"test\") }}\n    </body>\n</html>","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"This template generate the same output as the previous example.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"from is more flexible. You can directly add external macros into the namespace, and you can give it a different name or just add it as is.","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"{% from \"from2.html\" import input, title as alias %}\n\n<html>\n    <head><title>MyPage</title></head>\n    <body>\n        {{ alias(\"Test\") }}\n        {{ input(\"test\") }}\n    </body>\n</html>","category":"page"},{"location":"tutorial/#Configurations","page":"Tutorial","title":"Configurations","text":"","category":"section"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"there are six configurations:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"control_block_start: the string at the start of tmp code blocks.\ncontrol_block_end : the string at the end of tmp code blocks.\njl_block_start: the string at the start of jl code blocks.\njl_block_end : the string at the end of jl code blocks.\nexpression_block_start : the string at the start of expression blocks.\nexpression_block_end : the string at the end of expression blocks.\ncomment_block_start: the string at the start of comment blocks.\ncomment_block_end: the string at the end of comment block.\nautospace: the option to control space automatically.\nlstrip_blocks: the option to strip left spaces.\ntrim_blocks: the option to remove the first newline after blocks.\nautoescape: the option to automatically escape expression blocks\ndir: the working directory which include and extends statements refers to","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"and the default configuration is this:","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"\"control_block_start\"=>\"{%\",\n\"control_block_end\"=>\"%}\",\n\"expression_block_start\"=>\"{{\",\n\"expression_block_end\"=>\"}}\",\n\"jl_block_start\" => \"{<\",\n\"jl_block_end\" => \">}\",\n\"comment_block_start\" => \"{#\",\n\"comment_block_end\" => \"#}\",\n\"autospace\" => false,\n\"lstrip_blocks\" => false,\n\"trim_blocks\" => false,\n\"autoescape\" => true,\n\"dir\" => pwd()","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"configurations can be loaded from TOML file. You don't have to specify all the configurations(The rest uses the default settings).","category":"page"},{"location":"tutorial/","page":"Tutorial","title":"Tutorial","text":"warning: Same character settings\nIf you set the same characters into the different items, tokenizer won't be able to work. Even if they matches partially, tokenizer may not work. Moreover, ParserConfig checks the match between ~_start and ~_end, but others not.","category":"page"}]
}
